<!doctype html>
<html>
 <head>
  <meta charset="utf-8">
  <title>Value parser demo</title>
  <script type="text/javascript" src="jquery-1.8.1.min.js"></script>          
  <script type="text/javascript" src="json2.js"></script>          
  <script type="text/javascript">                                         
result = {};
$(document).ready(function() {
	var update = function() {
		$.getJSON('parser.php', {'val' : $('#in').val(), 'datatype' : 'number', 'unit' : $('#unit').val() }, function(data) {
			$('#all').text(JSON.stringify(data, null, 2));
			$('#unit').val(data.result.unit);
			result = data;
			out = data.result.quantityvalue + '&plusmn;' + data.result.upperuncertainty + ' ' + data.result.unit;
			out += '<br>';
			out += data.result.otherunit.quantityvalue + '&plusmn;' + data.result.otherunit.upperuncertainty + ' ' + data.result.otherunit.unit;
			out += '<br>';
			out += '(Exact: ' + data.result.exactconversion.quantityvalue + '&plusmn;' + data.result.exactconversion.upperuncertainty + ' ' + data.result.exactconversion.unit + ')';
			$('#out').html(out);
		});
	}
	$('#in').bind('input', update);
	$('#unit').bind('change', update);
});
  </script>                                                               
 </head>
 <body>
  <h1>Number</h1>
   <p>
    We assume that the selected property is something like <em>height</em>, i.e. a
    dimension measured in metres.
   </p>
   <form>
    <input type="text" id="in" name="in" autofocus placeholder="Test your value here" />
    <select id="unit">
     <option>meter</option>
     <option>feet</option>
     <option>yard</option>
    </select>
   </form>
  <p><div id="out">result</div></p>
  <pre id="all">For the JSON structure see also in your JS console the variable result</pre>
 </body>
</html>